<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>module ActiveRecord::Calculations - activerecord-3.2.3 Documentation</title>

<link type="text/css" media="screen" href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/darkfish.js"></script>


<body id="top" class="module">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../index.html">Home</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/active_record/relation/calculations.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    
    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-i-average">#average</a>
    
    <li><a href="#method-i-calculate">#calculate</a>
    
    <li><a href="#method-i-count">#count</a>
    
    <li><a href="#method-i-maximum">#maximum</a>
    
    <li><a href="#method-i-minimum">#minimum</a>
    
    <li><a href="#method-i-pluck">#pluck</a>
    
    <li><a href="#method-i-sum">#sum</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../README_rdoc.html">README</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../ActiveRecord.html">ActiveRecord</a>
  
    <li><a href="../ActiveRecord/ActiveRecordError.html">ActiveRecord::ActiveRecordError</a>
  
    <li><a href="../ActiveRecord/AdapterNotFound.html">ActiveRecord::AdapterNotFound</a>
  
    <li><a href="../ActiveRecord/AdapterNotSpecified.html">ActiveRecord::AdapterNotSpecified</a>
  
    <li><a href="../ActiveRecord/Aggregations.html">ActiveRecord::Aggregations</a>
  
    <li><a href="../ActiveRecord/Aggregations/ClassMethods.html">ActiveRecord::Aggregations::ClassMethods</a>
  
    <li><a href="../ActiveRecord/AssociationTypeMismatch.html">ActiveRecord::AssociationTypeMismatch</a>
  
    <li><a href="../ActiveRecord/Associations.html">ActiveRecord::Associations</a>
  
    <li><a href="../ActiveRecord/Associations/ClassMethods.html">ActiveRecord::Associations::ClassMethods</a>
  
    <li><a href="../ActiveRecord/AttributeAssignment.html">ActiveRecord::AttributeAssignment</a>
  
    <li><a href="../ActiveRecord/AttributeAssignment/ClassMethods.html">ActiveRecord::AttributeAssignment::ClassMethods</a>
  
    <li><a href="../ActiveRecord/AttributeAssignmentError.html">ActiveRecord::AttributeAssignmentError</a>
  
    <li><a href="../ActiveRecord/AttributeMethods.html">ActiveRecord::AttributeMethods</a>
  
    <li><a href="../ActiveRecord/AttributeMethods/BeforeTypeCast.html">ActiveRecord::AttributeMethods::BeforeTypeCast</a>
  
    <li><a href="../ActiveRecord/AttributeMethods/ClassMethods.html">ActiveRecord::AttributeMethods::ClassMethods</a>
  
    <li><a href="../ActiveRecord/AttributeMethods/DeprecatedUnderscoreRead.html">ActiveRecord::AttributeMethods::DeprecatedUnderscoreRead</a>
  
    <li><a href="../ActiveRecord/AttributeMethods/DeprecatedUnderscoreRead/ClassMethods.html">ActiveRecord::AttributeMethods::DeprecatedUnderscoreRead::ClassMethods</a>
  
    <li><a href="../ActiveRecord/AttributeMethods/Dirty.html">ActiveRecord::AttributeMethods::Dirty</a>
  
    <li><a href="../ActiveRecord/AttributeMethods/PrimaryKey.html">ActiveRecord::AttributeMethods::PrimaryKey</a>
  
    <li><a href="../ActiveRecord/AttributeMethods/PrimaryKey/ClassMethods.html">ActiveRecord::AttributeMethods::PrimaryKey::ClassMethods</a>
  
    <li><a href="../ActiveRecord/AttributeMethods/Query.html">ActiveRecord::AttributeMethods::Query</a>
  
    <li><a href="../ActiveRecord/AttributeMethods/Read.html">ActiveRecord::AttributeMethods::Read</a>
  
    <li><a href="../ActiveRecord/AttributeMethods/Read/ClassMethods.html">ActiveRecord::AttributeMethods::Read::ClassMethods</a>
  
    <li><a href="../ActiveRecord/AttributeMethods/Serialization.html">ActiveRecord::AttributeMethods::Serialization</a>
  
    <li><a href="../ActiveRecord/AttributeMethods/Serialization/Attribute.html">ActiveRecord::AttributeMethods::Serialization::Attribute</a>
  
    <li><a href="../ActiveRecord/AttributeMethods/Serialization/ClassMethods.html">ActiveRecord::AttributeMethods::Serialization::ClassMethods</a>
  
    <li><a href="../ActiveRecord/AttributeMethods/TimeZoneConversion.html">ActiveRecord::AttributeMethods::TimeZoneConversion</a>
  
    <li><a href="../ActiveRecord/AttributeMethods/TimeZoneConversion/ClassMethods.html">ActiveRecord::AttributeMethods::TimeZoneConversion::ClassMethods</a>
  
    <li><a href="../ActiveRecord/AttributeMethods/Write.html">ActiveRecord::AttributeMethods::Write</a>
  
    <li><a href="../ActiveRecord/AttributeMethods/Write/ClassMethods.html">ActiveRecord::AttributeMethods::Write::ClassMethods</a>
  
    <li><a href="../ActiveRecord/AutosaveAssociation.html">ActiveRecord::AutosaveAssociation</a>
  
    <li><a href="../ActiveRecord/AutosaveAssociation/ClassMethods.html">ActiveRecord::AutosaveAssociation::ClassMethods</a>
  
    <li><a href="../ActiveRecord/Base.html">ActiveRecord::Base</a>
  
    <li><a href="../ActiveRecord/Batches.html">ActiveRecord::Batches</a>
  
    <li><a href="../ActiveRecord/Calculations.html">ActiveRecord::Calculations</a>
  
    <li><a href="../ActiveRecord/Callbacks.html">ActiveRecord::Callbacks</a>
  
    <li><a href="../ActiveRecord/ConfigurationError.html">ActiveRecord::ConfigurationError</a>
  
    <li><a href="../ActiveRecord/ConnectionAdapters/AbstractAdapter.html">ActiveRecord::ConnectionAdapters::AbstractAdapter</a>
  
    <li><a href="../ActiveRecord/ConnectionAdapters/AbstractMysqlAdapter.html">ActiveRecord::ConnectionAdapters::AbstractMysqlAdapter</a>
  
    <li><a href="../ActiveRecord/ConnectionAdapters/ConnectionHandler.html">ActiveRecord::ConnectionAdapters::ConnectionHandler</a>
  
    <li><a href="../ActiveRecord/ConnectionAdapters/ConnectionManagement.html">ActiveRecord::ConnectionAdapters::ConnectionManagement</a>
  
    <li><a href="../ActiveRecord/ConnectionAdapters/ConnectionPool.html">ActiveRecord::ConnectionAdapters::ConnectionPool</a>
  
    <li><a href="../ActiveRecord/ConnectionAdapters/DatabaseLimits.html">ActiveRecord::ConnectionAdapters::DatabaseLimits</a>
  
    <li><a href="../ActiveRecord/ConnectionAdapters/DatabaseStatements.html">ActiveRecord::ConnectionAdapters::DatabaseStatements</a>
  
    <li><a href="../ActiveRecord/ConnectionAdapters/Mysql2Adapter.html">ActiveRecord::ConnectionAdapters::Mysql2Adapter</a>
  
    <li><a href="../ActiveRecord/ConnectionAdapters/MysqlAdapter.html">ActiveRecord::ConnectionAdapters::MysqlAdapter</a>
  
    <li><a href="../ActiveRecord/ConnectionAdapters/MysqlAdapter/StatementPool.html">ActiveRecord::ConnectionAdapters::MysqlAdapter::StatementPool</a>
  
    <li><a href="../ActiveRecord/ConnectionAdapters/PostgreSQLAdapter.html">ActiveRecord::ConnectionAdapters::PostgreSQLAdapter</a>
  
    <li><a href="../ActiveRecord/ConnectionAdapters/PostgreSQLAdapter/StatementPool.html">ActiveRecord::ConnectionAdapters::PostgreSQLAdapter::StatementPool</a>
  
    <li><a href="../ActiveRecord/ConnectionAdapters/PostgreSQLAdapter/TableDefinition.html">ActiveRecord::ConnectionAdapters::PostgreSQLAdapter::TableDefinition</a>
  
    <li><a href="../ActiveRecord/ConnectionAdapters/PostgreSQLAdapter/Utils.html">ActiveRecord::ConnectionAdapters::PostgreSQLAdapter::Utils</a>
  
    <li><a href="../ActiveRecord/ConnectionAdapters/PostgreSQLColumn.html">ActiveRecord::ConnectionAdapters::PostgreSQLColumn</a>
  
    <li><a href="../ActiveRecord/ConnectionAdapters/QueryCache.html">ActiveRecord::ConnectionAdapters::QueryCache</a>
  
    <li><a href="../ActiveRecord/ConnectionAdapters/Quoting.html">ActiveRecord::ConnectionAdapters::Quoting</a>
  
    <li><a href="../ActiveRecord/ConnectionAdapters/SQLiteAdapter.html">ActiveRecord::ConnectionAdapters::SQLiteAdapter</a>
  
    <li><a href="../ActiveRecord/ConnectionAdapters/SQLiteAdapter/ExplainPrettyPrinter.html">ActiveRecord::ConnectionAdapters::SQLiteAdapter::ExplainPrettyPrinter</a>
  
    <li><a href="../ActiveRecord/ConnectionAdapters/SQLiteAdapter/StatementPool.html">ActiveRecord::ConnectionAdapters::SQLiteAdapter::StatementPool</a>
  
    <li><a href="../ActiveRecord/ConnectionAdapters/SQLiteAdapter/Version.html">ActiveRecord::ConnectionAdapters::SQLiteAdapter::Version</a>
  
    <li><a href="../ActiveRecord/ConnectionAdapters/SchemaCache.html">ActiveRecord::ConnectionAdapters::SchemaCache</a>
  
    <li><a href="../ActiveRecord/ConnectionAdapters/SchemaStatements.html">ActiveRecord::ConnectionAdapters::SchemaStatements</a>
  
    <li><a href="../ActiveRecord/ConnectionAdapters/StatementPool.html">ActiveRecord::ConnectionAdapters::StatementPool</a>
  
    <li><a href="../ActiveRecord/ConnectionAdapters/Table.html">ActiveRecord::ConnectionAdapters::Table</a>
  
    <li><a href="../ActiveRecord/ConnectionAdapters/TableDefinition.html">ActiveRecord::ConnectionAdapters::TableDefinition</a>
  
    <li><a href="../ActiveRecord/ConnectionNotEstablished.html">ActiveRecord::ConnectionNotEstablished</a>
  
    <li><a href="../ActiveRecord/ConnectionTimeoutError.html">ActiveRecord::ConnectionTimeoutError</a>
  
    <li><a href="../ActiveRecord/CounterCache.html">ActiveRecord::CounterCache</a>
  
    <li><a href="../ActiveRecord/DangerousAttributeError.html">ActiveRecord::DangerousAttributeError</a>
  
    <li><a href="../ActiveRecord/Delegation.html">ActiveRecord::Delegation</a>
  
    <li><a href="../ActiveRecord/DynamicFinderMatch.html">ActiveRecord::DynamicFinderMatch</a>
  
    <li><a href="../ActiveRecord/DynamicMatchers.html">ActiveRecord::DynamicMatchers</a>
  
    <li><a href="../ActiveRecord/DynamicScopeMatch.html">ActiveRecord::DynamicScopeMatch</a>
  
    <li><a href="../ActiveRecord/Explain.html">ActiveRecord::Explain</a>
  
    <li><a href="../ActiveRecord/FinderMethods.html">ActiveRecord::FinderMethods</a>
  
    <li><a href="../ActiveRecord/Fixtures.html">ActiveRecord::Fixtures</a>
  
    <li><a href="../ActiveRecord/Fixtures/File.html">ActiveRecord::Fixtures::File</a>
  
    <li><a href="../ActiveRecord/Generators.html">ActiveRecord::Generators</a>
  
    <li><a href="../ActiveRecord/Generators/Migration.html">ActiveRecord::Generators::Migration</a>
  
    <li><a href="../ActiveRecord/Generators/MigrationGenerator.html">ActiveRecord::Generators::MigrationGenerator</a>
  
    <li><a href="../ActiveRecord/Generators/ModelGenerator.html">ActiveRecord::Generators::ModelGenerator</a>
  
    <li><a href="../ActiveRecord/Generators/ObserverGenerator.html">ActiveRecord::Generators::ObserverGenerator</a>
  
    <li><a href="../ActiveRecord/Generators/SessionMigrationGenerator.html">ActiveRecord::Generators::SessionMigrationGenerator</a>
  
    <li><a href="../ActiveRecord/IdentityMap.html">ActiveRecord::IdentityMap</a>
  
    <li><a href="../ActiveRecord/IdentityMap/Middleware.html">ActiveRecord::IdentityMap::Middleware</a>
  
    <li><a href="../ActiveRecord/Inheritance.html">ActiveRecord::Inheritance</a>
  
    <li><a href="../ActiveRecord/Inheritance/ClassMethods.html">ActiveRecord::Inheritance::ClassMethods</a>
  
    <li><a href="../ActiveRecord/Integration.html">ActiveRecord::Integration</a>
  
    <li><a href="../ActiveRecord/InvalidForeignKey.html">ActiveRecord::InvalidForeignKey</a>
  
    <li><a href="../ActiveRecord/IrreversibleMigration.html">ActiveRecord::IrreversibleMigration</a>
  
    <li><a href="../ActiveRecord/Locking.html">ActiveRecord::Locking</a>
  
    <li><a href="../ActiveRecord/Locking/Optimistic.html">ActiveRecord::Locking::Optimistic</a>
  
    <li><a href="../ActiveRecord/Locking/Optimistic/ClassMethods.html">ActiveRecord::Locking::Optimistic::ClassMethods</a>
  
    <li><a href="../ActiveRecord/Locking/Pessimistic.html">ActiveRecord::Locking::Pessimistic</a>
  
    <li><a href="../ActiveRecord/LogSubscriber.html">ActiveRecord::LogSubscriber</a>
  
    <li><a href="../ActiveRecord/Migration.html">ActiveRecord::Migration</a>
  
    <li><a href="../ActiveRecord/Migration/CommandRecorder.html">ActiveRecord::Migration::CommandRecorder</a>
  
    <li><a href="../ActiveRecord/MigrationProxy.html">ActiveRecord::MigrationProxy</a>
  
    <li><a href="../ActiveRecord/ModelSchema.html">ActiveRecord::ModelSchema</a>
  
    <li><a href="../ActiveRecord/ModelSchema/ClassMethods.html">ActiveRecord::ModelSchema::ClassMethods</a>
  
    <li><a href="../ActiveRecord/MultiparameterAssignmentErrors.html">ActiveRecord::MultiparameterAssignmentErrors</a>
  
    <li><a href="../ActiveRecord/NestedAttributes.html">ActiveRecord::NestedAttributes</a>
  
    <li><a href="../ActiveRecord/NestedAttributes/ClassMethods.html">ActiveRecord::NestedAttributes::ClassMethods</a>
  
    <li><a href="../ActiveRecord/NestedAttributes/TooManyRecords.html">ActiveRecord::NestedAttributes::TooManyRecords</a>
  
    <li><a href="../ActiveRecord/Observer.html">ActiveRecord::Observer</a>
  
    <li><a href="../ActiveRecord/Persistence.html">ActiveRecord::Persistence</a>
  
    <li><a href="../ActiveRecord/Persistence/ClassMethods.html">ActiveRecord::Persistence::ClassMethods</a>
  
    <li><a href="../ActiveRecord/PreparedStatementInvalid.html">ActiveRecord::PreparedStatementInvalid</a>
  
    <li><a href="../ActiveRecord/QueryCache.html">ActiveRecord::QueryCache</a>
  
    <li><a href="../ActiveRecord/QueryCache/ClassMethods.html">ActiveRecord::QueryCache::ClassMethods</a>
  
    <li><a href="../ActiveRecord/QueryMethods.html">ActiveRecord::QueryMethods</a>
  
    <li><a href="../ActiveRecord/Querying.html">ActiveRecord::Querying</a>
  
    <li><a href="../ActiveRecord/Railtie.html">ActiveRecord::Railtie</a>
  
    <li><a href="../ActiveRecord/Railties.html">ActiveRecord::Railties</a>
  
    <li><a href="../ActiveRecord/Railties/ControllerRuntime.html">ActiveRecord::Railties::ControllerRuntime</a>
  
    <li><a href="../ActiveRecord/Railties/ControllerRuntime/ClassMethods.html">ActiveRecord::Railties::ControllerRuntime::ClassMethods</a>
  
    <li><a href="../ActiveRecord/ReadOnlyRecord.html">ActiveRecord::ReadOnlyRecord</a>
  
    <li><a href="../ActiveRecord/ReadonlyAttributes.html">ActiveRecord::ReadonlyAttributes</a>
  
    <li><a href="../ActiveRecord/ReadonlyAttributes/ClassMethods.html">ActiveRecord::ReadonlyAttributes::ClassMethods</a>
  
    <li><a href="../ActiveRecord/RecordInvalid.html">ActiveRecord::RecordInvalid</a>
  
    <li><a href="../ActiveRecord/RecordNotFound.html">ActiveRecord::RecordNotFound</a>
  
    <li><a href="../ActiveRecord/RecordNotSaved.html">ActiveRecord::RecordNotSaved</a>
  
    <li><a href="../ActiveRecord/RecordNotUnique.html">ActiveRecord::RecordNotUnique</a>
  
    <li><a href="../ActiveRecord/Reflection.html">ActiveRecord::Reflection</a>
  
    <li><a href="../ActiveRecord/Reflection/ClassMethods.html">ActiveRecord::Reflection::ClassMethods</a>
  
    <li><a href="../ActiveRecord/Reflection/MacroReflection.html">ActiveRecord::Reflection::MacroReflection</a>
  
    <li><a href="../ActiveRecord/Relation.html">ActiveRecord::Relation</a>
  
    <li><a href="../ActiveRecord/Result.html">ActiveRecord::Result</a>
  
    <li><a href="../ActiveRecord/Rollback.html">ActiveRecord::Rollback</a>
  
    <li><a href="../ActiveRecord/Sanitization.html">ActiveRecord::Sanitization</a>
  
    <li><a href="../ActiveRecord/Sanitization/ClassMethods.html">ActiveRecord::Sanitization::ClassMethods</a>
  
    <li><a href="../ActiveRecord/Schema.html">ActiveRecord::Schema</a>
  
    <li><a href="../ActiveRecord/Scoping.html">ActiveRecord::Scoping</a>
  
    <li><a href="../ActiveRecord/Scoping/ClassMethods.html">ActiveRecord::Scoping::ClassMethods</a>
  
    <li><a href="../ActiveRecord/Scoping/Default.html">ActiveRecord::Scoping::Default</a>
  
    <li><a href="../ActiveRecord/Scoping/Default/ClassMethods.html">ActiveRecord::Scoping::Default::ClassMethods</a>
  
    <li><a href="../ActiveRecord/Scoping/Named.html">ActiveRecord::Scoping::Named</a>
  
    <li><a href="../ActiveRecord/Scoping/Named/ClassMethods.html">ActiveRecord::Scoping::Named::ClassMethods</a>
  
    <li><a href="../ActiveRecord/Serialization.html">ActiveRecord::Serialization</a>
  
    <li><a href="../ActiveRecord/SerializationTypeMismatch.html">ActiveRecord::SerializationTypeMismatch</a>
  
    <li><a href="../ActiveRecord/SessionStore.html">ActiveRecord::SessionStore</a>
  
    <li><a href="../ActiveRecord/SessionStore/Session.html">ActiveRecord::SessionStore::Session</a>
  
    <li><a href="../ActiveRecord/SessionStore/SqlBypass.html">ActiveRecord::SessionStore::SqlBypass</a>
  
    <li><a href="../ActiveRecord/SpawnMethods.html">ActiveRecord::SpawnMethods</a>
  
    <li><a href="../ActiveRecord/StaleObjectError.html">ActiveRecord::StaleObjectError</a>
  
    <li><a href="../ActiveRecord/StatementInvalid.html">ActiveRecord::StatementInvalid</a>
  
    <li><a href="../ActiveRecord/Store.html">ActiveRecord::Store</a>
  
    <li><a href="../ActiveRecord/Store/ClassMethods.html">ActiveRecord::Store::ClassMethods</a>
  
    <li><a href="../ActiveRecord/TestFixtures.html">ActiveRecord::TestFixtures</a>
  
    <li><a href="../ActiveRecord/TestFixtures/ClassMethods.html">ActiveRecord::TestFixtures::ClassMethods</a>
  
    <li><a href="../ActiveRecord/ThrowResult.html">ActiveRecord::ThrowResult</a>
  
    <li><a href="../ActiveRecord/Timestamp.html">ActiveRecord::Timestamp</a>
  
    <li><a href="../ActiveRecord/Transactions.html">ActiveRecord::Transactions</a>
  
    <li><a href="../ActiveRecord/Transactions/ClassMethods.html">ActiveRecord::Transactions::ClassMethods</a>
  
    <li><a href="../ActiveRecord/Translation.html">ActiveRecord::Translation</a>
  
    <li><a href="../ActiveRecord/UnknownAttributeError.html">ActiveRecord::UnknownAttributeError</a>
  
    <li><a href="../ActiveRecord/UnknownPrimaryKey.html">ActiveRecord::UnknownPrimaryKey</a>
  
    <li><a href="../ActiveRecord/Validations.html">ActiveRecord::Validations</a>
  
    <li><a href="../ActiveRecord/Validations/AssociatedValidator.html">ActiveRecord::Validations::AssociatedValidator</a>
  
    <li><a href="../ActiveRecord/Validations/ClassMethods.html">ActiveRecord::Validations::ClassMethods</a>
  
    <li><a href="../ActiveRecord/Validations/UniquenessValidator.html">ActiveRecord::Validations::UniquenessValidator</a>
  
    <li><a href="../ActiveRecord/WrappedDatabaseException.html">ActiveRecord::WrappedDatabaseException</a>
  
    <li><a href="../Mysql.html">Mysql</a>
  
    <li><a href="../Mysql/Result.html">Mysql::Result</a>
  
    <li><a href="../Mysql/Stmt.html">Mysql::Stmt</a>
  
    <li><a href="../Mysql/Time.html">Mysql::Time</a>
  
    <li><a href="../ArJdbcMySQL.html">ArJdbcMySQL</a>
  
    <li><a href="../ArJdbcMySQL/Error.html">ArJdbcMySQL::Error</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="module">module ActiveRecord::Calculations</h1>

  <div id="description" class="description">
    
  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    <!-- Methods -->
    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-average" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">average</span><span
            class="method-args">(column_name, options = {})</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Calculates the average value on a given column. Returns <code>nil</code> if
there’s no row. See <code>calculate</code> for examples with options.</p>

<pre class="ruby"><span class="ruby-constant">Person</span>.<span class="ruby-identifier">average</span>(<span class="ruby-string">'age'</span>) <span class="ruby-comment"># =&gt; 35.8</span>
</pre>
          

          
          <div class="method-source-code" id="average-source">
            <pre><span class="ruby-comment"># File lib/active_record/relation/calculations.rb, line 65</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">average</span>(<span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">calculate</span>(<span class="ruby-value">:average</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- average-source -->
          
        </div>

        

        
      </div><!-- average-method -->

    
      <div id="method-i-calculate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">calculate</span><span
            class="method-args">(operation, column_name, options = {})</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>This calculates aggregate values in the given column. Methods for count,
sum, average, minimum, and maximum have been added as shortcuts. Options
such as <code>:conditions</code>, <code>:order</code>, <code>:group</code>,
<code>:having</code>, and <code>:joins</code> can be passed to customize
the query.</p>

<p>There are two basic forms of output:</p>

<pre class="ruby">* <span class="ruby-constant">Single</span> <span class="ruby-identifier">aggregate</span> <span class="ruby-identifier">value</span><span class="ruby-operator">:</span> <span class="ruby-constant">The</span> <span class="ruby-identifier">single</span> <span class="ruby-identifier">value</span> <span class="ruby-identifier">is</span> <span class="ruby-identifier">type</span> <span class="ruby-identifier">cast</span> <span class="ruby-identifier">to</span> <span class="ruby-constant">Fixnum</span> <span class="ruby-keyword">for</span> <span class="ruby-constant">COUNT</span>, <span class="ruby-constant">Float</span>
  <span class="ruby-keyword">for</span> <span class="ruby-constant">AVG</span>, <span class="ruby-keyword">and</span> <span class="ruby-identifier">the</span> <span class="ruby-identifier">given</span> <span class="ruby-identifier">column</span><span class="ruby-string">'s type for everything else.
* Grouped values: This returns an ordered hash of the values and groups them by the
  &lt;tt&gt;:group&lt;/tt&gt; option. It takes either a column name, or the name of a belongs_to association.

    values = Person.maximum(:age, :group =&gt; '</span><span class="ruby-identifier">last_name</span><span class="ruby-string">')
    puts values[&quot;Drake&quot;]
    =&gt; 43

    drake  = Family.find_by_last_name('</span><span class="ruby-constant">Drake</span><span class="ruby-string">')
    values = Person.maximum(:age, :group =&gt; :family) # Person belongs_to :family
    puts values[drake]
    =&gt; 43

    values.each do |family, max_age|
    ...
    end
</span></pre>

<p>Options:</p>
<ul><li>
<p><code>:conditions</code> - An SQL fragment like "administrator = 1" or [
"user_name = ?", username ]. See conditions in the intro to <a
href="Base.html">ActiveRecord::Base</a>.</p>
</li><li>
<p><code>:include</code>: Eager loading, see <a
href="Associations.html">Associations</a> for details. Since calculations
don't load anything, the purpose of this is to access fields on joined
tables in your conditions, order, or group clauses.</p>
</li><li>
<p><code>:joins</code> - An SQL fragment for additional joins like "LEFT JOIN
comments ON comments.post_id = id". (Rarely needed). The records will be
returned read-only since they will have attributes that do not correspond
to the table's columns.</p>
</li><li>
<p><code>:order</code> - An SQL fragment like "created_at DESC, name" (really
only used with GROUP BY calculations).</p>
</li><li>
<p><code>:group</code> - An attribute name by which the result should be
grouped. Uses the GROUP BY SQL-clause.</p>
</li><li>
<p><code>:select</code> - By default, this is * as in SELECT * FROM, but can
be changed if you for example want to do a join, but not include the joined
columns.</p>
</li><li>
<p><code>:distinct</code> - Set this to true to make this a distinct
calculation, such as SELECT COUNT(DISTINCT posts.id) ...</p>
</li></ul>

<p>Examples:</p>

<pre class="ruby"><span class="ruby-constant">Person</span>.<span class="ruby-identifier">calculate</span>(:<span class="ruby-identifier">count</span>, :<span class="ruby-identifier">all</span>) <span class="ruby-comment"># The same as Person.count</span>
<span class="ruby-constant">Person</span>.<span class="ruby-identifier">average</span>(:<span class="ruby-identifier">age</span>) <span class="ruby-comment"># SELECT AVG(age) FROM people...</span>
<span class="ruby-constant">Person</span>.<span class="ruby-identifier">minimum</span>(:<span class="ruby-identifier">age</span>, :<span class="ruby-identifier">conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-string">'last_name != ?'</span>, <span class="ruby-string">'Drake'</span>]) <span class="ruby-comment"># Selects the minimum age for</span>
                                                                 <span class="ruby-comment"># everyone with a last name other than 'Drake'</span>

<span class="ruby-comment"># Selects the minimum age for any family without any minors</span>
<span class="ruby-constant">Person</span>.<span class="ruby-identifier">minimum</span>(:<span class="ruby-identifier">age</span>, :<span class="ruby-identifier">having</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'min(age) &gt; 17'</span>, :<span class="ruby-identifier">group</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">last_name</span>)

<span class="ruby-constant">Person</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-string">&quot;2 * age&quot;</span>)
</pre>
          

          
          <div class="method-source-code" id="calculate-source">
            <pre><span class="ruby-comment"># File lib/active_record/relation/calculations.rb, line 149</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">calculate</span>(<span class="ruby-identifier">operation</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">except</span>(<span class="ruby-value">:distinct</span>).<span class="ruby-identifier">present?</span>
    <span class="ruby-identifier">apply_finder_options</span>(<span class="ruby-identifier">options</span>.<span class="ruby-identifier">except</span>(<span class="ruby-value">:distinct</span>)).<span class="ruby-identifier">calculate</span>(<span class="ruby-identifier">operation</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-value">:distinct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:distinct</span>])
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">relation</span> = <span class="ruby-identifier">with_default_scope</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">equal?</span>(<span class="ruby-keyword">self</span>)
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">eager_loading?</span> <span class="ruby-operator">||</span> (<span class="ruby-identifier">includes_values</span>.<span class="ruby-identifier">present?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">references_eager_loaded_tables?</span>)
        <span class="ruby-identifier">construct_relation_for_association_calculations</span>.<span class="ruby-identifier">calculate</span>(<span class="ruby-identifier">operation</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">options</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">perform_calculation</span>(<span class="ruby-identifier">operation</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">options</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">relation</span>.<span class="ruby-identifier">calculate</span>(<span class="ruby-identifier">operation</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">options</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">ThrowResult</span>
  <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- calculate-source -->
          
        </div>

        

        
      </div><!-- calculate-method -->

    
      <div id="method-i-count" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">count</span><span
            class="method-args">(column_name = nil, options = {})</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Count operates using three different approaches.</p>
<ul><li>
<p>Count all: By not passing any parameters to count, it will return a count
of all the rows for the model.</p>
</li><li>
<p>Count using column: By passing a column name to count, it will return a
count of all the rows for the model with supplied column present.</p>
</li><li>
<p>Count using options will find the row count matched by the options used.</p>
</li></ul>

<p>The third approach, count using options, accepts an option hash as the only
parameter. The options are:</p>
<ul><li>
<p><code>:conditions</code>: An SQL fragment like "administrator = 1" or [
"user_name = ?", username ]. See conditions in the intro to <a
href="Base.html">ActiveRecord::Base</a>.</p>
</li><li>
<p><code>:joins</code>: Either an SQL fragment for additional joins like "LEFT
JOIN comments ON comments.post_id = id" (rarely needed) or named
associations in the same form used for the <code>:include</code> option,
which will perform an INNER JOIN on the associated table(s). If the value
is a string, then the records will be returned read-only since they will
have attributes that do not correspond to the table's columns. Pass
<code>:readonly =&gt; false</code> to override.</p>
</li><li>
<p><code>:include</code>: Named associations that should be loaded alongside
using LEFT OUTER JOINs. The symbols named refer to already defined
associations. When using named associations, count returns the number of
DISTINCT items for the model you're counting. See eager loading under <a
href="Associations.html">Associations</a>.</p>
</li><li>
<p><code>:order</code>: An SQL fragment like "created_at DESC, name" (really
only used with GROUP BY calculations).</p>
</li><li>
<p><code>:group</code>: An attribute name by which the result should be
grouped. Uses the GROUP BY SQL-clause.</p>
</li><li>
<p><code>:select</code>: By default, this is * as in SELECT * FROM, but can be
changed if you, for example, want to do a join but not include the joined
columns.</p>
</li><li>
<p><code>:distinct</code>: Set this to true to make this a distinct
calculation, such as SELECT COUNT(DISTINCT posts.id) ...</p>
</li><li>
<p><code>:from</code> - By default, this is the table name of the class, but
can be changed to an alternate table name (or even the name of a database
view).</p>
</li></ul>

<p>Examples for counting all:</p>

<pre>Person.count         # returns the total count of all people</pre>

<p>Examples for counting by column:</p>

<pre>Person.count(:age)  # returns the total count of all people whose age is present in database</pre>

<p>Examples for count with options:</p>

<pre class="ruby"><span class="ruby-constant">Person</span>.<span class="ruby-identifier">count</span>(:<span class="ruby-identifier">conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;age &gt; 26&quot;</span>)

<span class="ruby-comment"># because of the named association, it finds the DISTINCT count using LEFT OUTER JOIN.</span>
<span class="ruby-constant">Person</span>.<span class="ruby-identifier">count</span>(:<span class="ruby-identifier">conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;age &gt; 26 AND job.salary &gt; 60000&quot;</span>, :<span class="ruby-identifier">include</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">job</span>)

<span class="ruby-comment"># finds the number of rows matching the conditions and joins.</span>
<span class="ruby-constant">Person</span>.<span class="ruby-identifier">count</span>(:<span class="ruby-identifier">conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;age &gt; 26 AND job.salary &gt; 60000&quot;</span>,
             :<span class="ruby-identifier">joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;LEFT JOIN jobs on jobs.person_id = person.id&quot;</span>)

<span class="ruby-constant">Person</span>.<span class="ruby-identifier">count</span>(<span class="ruby-string">'id'</span>, :<span class="ruby-identifier">conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;age &gt; 26&quot;</span>) <span class="ruby-comment"># Performs a COUNT(id)</span>
<span class="ruby-constant">Person</span>.<span class="ruby-identifier">count</span>(:<span class="ruby-identifier">all</span>, :<span class="ruby-identifier">conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;age &gt; 26&quot;</span>) <span class="ruby-comment"># Performs a COUNT(*) (:all is an alias for '*')</span>
</pre>

<p>Note: <code>Person.count(:all)</code> will not work because it will use
<code>:all</code> as the condition. Use Person.count instead.</p>
          

          
          <div class="method-source-code" id="count-source">
            <pre><span class="ruby-comment"># File lib/active_record/relation/calculations.rb, line 56</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">count</span>(<span class="ruby-identifier">column_name</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">options</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">column_name</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">column_name</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
  <span class="ruby-identifier">calculate</span>(<span class="ruby-value">:count</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- count-source -->
          
        </div>

        

        
      </div><!-- count-method -->

    
      <div id="method-i-maximum" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">maximum</span><span
            class="method-args">(column_name, options = {})</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Calculates the maximum value on a given column. The value is returned with
the same data type of the column, or <code>nil</code> if there’s no row.
See <code>calculate</code> for examples with options.</p>

<pre class="ruby"><span class="ruby-constant">Person</span>.<span class="ruby-identifier">maximum</span>(<span class="ruby-string">'age'</span>) <span class="ruby-comment"># =&gt; 93</span>
</pre>
          

          
          <div class="method-source-code" id="maximum-source">
            <pre><span class="ruby-comment"># File lib/active_record/relation/calculations.rb, line 83</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">maximum</span>(<span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">calculate</span>(<span class="ruby-value">:maximum</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- maximum-source -->
          
        </div>

        

        
      </div><!-- maximum-method -->

    
      <div id="method-i-minimum" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">minimum</span><span
            class="method-args">(column_name, options = {})</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Calculates the minimum value on a given column. The value is returned with
the same data type of the column, or <code>nil</code> if there’s no row.
See <code>calculate</code> for examples with options.</p>

<pre class="ruby"><span class="ruby-constant">Person</span>.<span class="ruby-identifier">minimum</span>(<span class="ruby-string">'age'</span>) <span class="ruby-comment"># =&gt; 7</span>
</pre>
          

          
          <div class="method-source-code" id="minimum-source">
            <pre><span class="ruby-comment"># File lib/active_record/relation/calculations.rb, line 74</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">minimum</span>(<span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">calculate</span>(<span class="ruby-value">:minimum</span>, <span class="ruby-identifier">column_name</span>, <span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- minimum-source -->
          
        </div>

        

        
      </div><!-- minimum-method -->

    
      <div id="method-i-pluck" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">pluck</span><span
            class="method-args">(column_name)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>This method is designed to perform select by a single column as direct SQL
query Returns <code>Array</code> with values of the specified column name
The values has same data type as column.</p>

<p>Examples:</p>

<pre class="ruby"><span class="ruby-constant">Person</span>.<span class="ruby-identifier">pluck</span>(:<span class="ruby-identifier">id</span>) <span class="ruby-comment"># SELECT people.id FROM people</span>
<span class="ruby-constant">Person</span>.<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">pluck</span>(:<span class="ruby-identifier">role</span>) <span class="ruby-comment"># SELECT DISTINCT role FROM people</span>
<span class="ruby-constant">Person</span>.<span class="ruby-identifier">where</span>(:<span class="ruby-identifier">confirmed</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>).<span class="ruby-identifier">limit</span>(<span class="ruby-value">5</span>).<span class="ruby-identifier">pluck</span>(:<span class="ruby-identifier">id</span>)
</pre>
          

          
          <div class="method-source-code" id="pluck-source">
            <pre><span class="ruby-comment"># File lib/active_record/relation/calculations.rb, line 179</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pluck</span>(<span class="ruby-identifier">column_name</span>)
  <span class="ruby-identifier">column_name</span> = <span class="ruby-identifier">column_name</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_all</span>(<span class="ruby-identifier">select</span>(<span class="ruby-identifier">column_name</span>).<span class="ruby-identifier">arel</span>).<span class="ruby-identifier">map!</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attributes</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">type_cast_attribute</span>(<span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">first</span>, <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">initialize_attributes</span>(<span class="ruby-identifier">attributes</span>))
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- pluck-source -->
          
        </div>

        

        
      </div><!-- pluck-method -->

    
      <div id="method-i-sum" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">sum</span><span
            class="method-args">(*args) { |*block_args| ... }</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Calculates the sum of values on a given column. The value is returned with
the same data type of the column, 0 if there’s no row. See
<code>calculate</code> for examples with options.</p>

<pre class="ruby"><span class="ruby-constant">Person</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-string">'age'</span>) <span class="ruby-comment"># =&gt; 4562</span>
</pre>
          

          
          <div class="method-source-code" id="sum-source">
            <pre><span class="ruby-comment"># File lib/active_record/relation/calculations.rb, line 92</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">sum</span>(*<span class="ruby-identifier">args</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">sum</span>(*<span class="ruby-identifier">args</span>) {<span class="ruby-operator">|</span>*<span class="ruby-identifier">block_args</span><span class="ruby-operator">|</span> <span class="ruby-keyword">yield</span>(*<span class="ruby-identifier">block_args</span>)}
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">calculate</span>(<span class="ruby-value">:sum</span>, *<span class="ruby-identifier">args</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- sum-source -->
          
        </div>

        

        
      </div><!-- sum-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

